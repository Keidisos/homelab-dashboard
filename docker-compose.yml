services:
  lab-dashboard:
    build: .
    container_name: lab-dashboard
    restart: unless-stopped
    ports:
      - "3000:3000"
    volumes:
      # Persist settings data
      - dashboard-data:/app/data
    environment:
      # Authentication
      - AUTH_SECRET=${AUTH_SECRET}
      - AUTH_USERNAME=${AUTH_USERNAME:-admin}
      - AUTH_PASSWORD=${AUTH_PASSWORD}
      - AUTH_URL=${AUTH_URL:-http://localhost:3000}

      # Proxmox
      - PROXMOX_HOST=${PROXMOX_HOST}
      - PROXMOX_TOKEN_ID=${PROXMOX_TOKEN_ID}
      - PROXMOX_TOKEN_SECRET=${PROXMOX_TOKEN_SECRET}

      # Portainer
      - PORTAINER_HOST=${PORTAINER_HOST}
      - PORTAINER_API_KEY=${PORTAINER_API_KEY}

      # Jellyfin
      - JELLYFIN_HOST=${JELLYFIN_HOST}
      - JELLYFIN_API_KEY=${JELLYFIN_API_KEY}

      # Pterodactyl
      - PTERODACTYL_HOST=${PTERODACTYL_HOST}
      - PTERODACTYL_API_KEY=${PTERODACTYL_API_KEY}

      # Jellyseerr
      - JELLYSEERR_HOST=${JELLYSEERR_HOST}
      - JELLYSEERR_API_KEY=${JELLYSEERR_API_KEY}

      # qBittorrent
      - QBITTORRENT_HOST=${QBITTORRENT_HOST}
      - QBITTORRENT_USERNAME=${QBITTORRENT_USERNAME}
      - QBITTORRENT_PASSWORD=${QBITTORRENT_PASSWORD}

      # Sonarr
      - SONARR_HOST=${SONARR_HOST}
      - SONARR_API_KEY=${SONARR_API_KEY}

      # Radarr
      - RADARR_HOST=${RADARR_HOST}
      - RADARR_API_KEY=${RADARR_API_KEY}

      # Uptime Kuma
      - UPTIME_KUMA_HOST=${UPTIME_KUMA_HOST}
      - UPTIME_KUMA_STATUS_PAGE=${UPTIME_KUMA_STATUS_PAGE:-default}

      # Home Assistant
      - HOMEASSISTANT_HOST=${HOMEASSISTANT_HOST}
      - HOMEASSISTANT_TOKEN=${HOMEASSISTANT_TOKEN}
    networks:
      - homelab

volumes:
  dashboard-data:

networks:
  homelab:
    driver: bridge
